par(new=TRUE)
plot(max_spe~tp, col = coul[i], ylim = c(0,0.06), axes = F, ylab = "")
lines(max_spe~tp, col = coul[i], lty = 2)
}
}
}
################################## plots #################################################################
#############################################################################################################
#############################################################################################################
#par(mfrow = c(2,2))
split.screen( figs = c( 2, 2 ) )
dif = sort(unique(tab$dif))
couleur<-colors()
coul=sample(rainbow(length(dif)), length(dif))
for ( i in 1:length(dif)){
t = tab[tab$dif == dif[i],] #tableau pour une dif donnée
tp = sort(unique(t$patch))
max_plast = c()
max_spe = c()
max_dif_null = c()
for (j in 1:length(tp)){
t1 = t[t$patch==tp[j],] #tableau pour une dif donnée et un taille patch donné
spe = t1$d0 - t1$d1
dif_null = c()
for (k in 1:length(t1)[1]){
dd0 = t1$d0[k]
dd1 = t1$d1[k]
if ((dd0 + dd1) %% 2 ==0){
without_plast = t1$biom[k] - t1$biom[(t1$d0 + t1$d1 == dd0 + dd1) & (t1$d0 == t1$d1)]
}
else{
without_plast1 = t1$biom[k] - t1$biom[(t1$d0 + t1$d1 == dd0 + dd1 + 1) & (t1$d0 == t1$d1)]
without_plast2 = t1$biom[k] - t1$biom[(t1$d0 + t1$d1 == dd0 + dd1 - 1) & (t1$d0 == t1$d1)]
without_plast = (without_plast1 + without_plast2)/2
}
dif_null = c(dif_null, without_plast)
}
t1 = cbind(spe, t1)
max_plast = c(max_plast, t1$spe[t1$biom == max(t1$biom)]) # ! peu poser pb si plusieurs maxs!!!!!!!
max_spe = c(max_spe, t1$cp[t1$biom == max(t1$biom)])
max_dif_null = c(max_dif_null, max(dif_null))
}
if (i==1){
screen(1)
a = plot(max_plast~tp, col = coul[i], ylim = c(0,8))
lines(max_plast~tp, col = coul[i])
par(new=TRUE)
b = plot(max_spe~tp, col = coul[i], ylim = c(0,0.06), axes = F, ylab = "")
lines(max_spe~tp, col = coul[i], lty = 2)
screen(2)
plot(max_dif_null~tp, col = coul[i], ylim = c(0,8))
} else {
screen(1)
par(new=TRUE)
plot(max_plast~tp, col = coul[i], ylim = c(0,8))
lines(max_plast~tp, col = coul[i])
par(new=TRUE)
plot(max_spe~tp, col = coul[i], ylim = c(0,0.06), axes = F, ylab = "")
lines(max_spe~tp, col = coul[i], lty = 2)
}
}
warnings()
coul[i]
#############################################################################################################
#par(mfrow = c(2,2))
split.screen( figs = c( 2, 2 ) )
dif = sort(unique(tab$dif))
couleur<-colors()
coul=sample(rainbow(length(dif)), length(dif))
for ( i in 1:length(dif)){
t = tab[tab$dif == dif[i],] #tableau pour une dif donnée
tp = sort(unique(t$patch))
max_plast = c()
max_spe = c()
max_dif_null = c()
for (j in 1:length(tp)){
t1 = t[t$patch==tp[j],] #tableau pour une dif donnée et un taille patch donné
spe = t1$d0 - t1$d1
dif_null = c()
for (k in 1:length(t1)[1]){
dd0 = t1$d0[k]
dd1 = t1$d1[k]
if ((dd0 + dd1) %% 2 ==0){
without_plast = t1$biom[k] - t1$biom[(t1$d0 + t1$d1 == dd0 + dd1) & (t1$d0 == t1$d1)]
}
else{
without_plast1 = t1$biom[k] - t1$biom[(t1$d0 + t1$d1 == dd0 + dd1 + 1) & (t1$d0 == t1$d1)]
without_plast2 = t1$biom[k] - t1$biom[(t1$d0 + t1$d1 == dd0 + dd1 - 1) & (t1$d0 == t1$d1)]
without_plast = (without_plast1 + without_plast2)/2
}
dif_null = c(dif_null, without_plast)
}
t1 = cbind(spe, t1)
max_plast = c(max_plast, t1$spe[t1$biom == max(t1$biom)]) # ! peu poser pb si plusieurs maxs!!!!!!!
max_spe = c(max_spe, t1$cp[t1$biom == max(t1$biom)])
max_dif_null = c(max_dif_null, max(dif_null))
}
if (i==1){
screen(1)
a = plot(max_plast~tp, col = coul[i], ylim = c(0,8))
lines(max_plast~tp, col = coul[i])
par(new=TRUE)
b = plot(max_spe~tp, col = coul[i], ylim = c(0,0.06), axes = F, ylab = "")
lines(max_spe~tp, col = coul[i], lty = 2)
screen(2)
plot(max_dif_null~tp, col = coul[i], ylim = c(0,8))
} else {
#screen(1)
par(new=TRUE)
plot(max_plast~tp, col = coul[i], ylim = c(0,8))
lines(max_plast~tp, col = coul[i])
par(new=TRUE)
plot(max_spe~tp, col = coul[i], ylim = c(0,0.06), axes = F, ylab = "")
lines(max_spe~tp, col = coul[i], lty = 2)
}
}
#############################################################################################################
#############################################################################################################
#par(mfrow = c(2,2))
split.screen( figs = c( 2, 2 ) )
dif = sort(unique(tab$dif))
couleur<-colors()
coul=sample(rainbow(length(dif)), length(dif))
for ( i in 1:length(dif)){
t = tab[tab$dif == dif[i],] #tableau pour une dif donnée
tp = sort(unique(t$patch))
max_plast = c()
max_spe = c()
max_dif_null = c()
for (j in 1:length(tp)){
t1 = t[t$patch==tp[j],] #tableau pour une dif donnée et un taille patch donné
spe = t1$d0 - t1$d1
dif_null = c()
for (k in 1:length(t1)[1]){
dd0 = t1$d0[k]
dd1 = t1$d1[k]
if ((dd0 + dd1) %% 2 ==0){
without_plast = t1$biom[k] - t1$biom[(t1$d0 + t1$d1 == dd0 + dd1) & (t1$d0 == t1$d1)]
}
else{
without_plast1 = t1$biom[k] - t1$biom[(t1$d0 + t1$d1 == dd0 + dd1 + 1) & (t1$d0 == t1$d1)]
without_plast2 = t1$biom[k] - t1$biom[(t1$d0 + t1$d1 == dd0 + dd1 - 1) & (t1$d0 == t1$d1)]
without_plast = (without_plast1 + without_plast2)/2
}
dif_null = c(dif_null, without_plast)
}
t1 = cbind(spe, t1)
max_plast = c(max_plast, t1$spe[t1$biom == max(t1$biom)]) # ! peu poser pb si plusieurs maxs!!!!!!!
max_spe = c(max_spe, t1$cp[t1$biom == max(t1$biom)])
max_dif_null = c(max_dif_null, max(dif_null))
}
if (i==1){
screen(1)
a = plot(max_plast~tp, col = coul[i], ylim = c(0,8))
lines(max_plast~tp, col = coul[i])
par(new=TRUE)
b = plot(max_spe~tp, col = coul[i], ylim = c(0,0.06), axes = F, ylab = "")
lines(max_spe~tp, col = coul[i], lty = 2)
screen(2)
plot(max_dif_null~tp, col = coul[i], ylim = c(0,8))
} else {
screen(1)
par(new=TRUE)
plot(max_plast~tp, col = coul[i], ylim = c(0,8))
lines(max_plast~tp, col = coul[i])
par(new=TRUE)
plot(max_spe~tp, col = coul[i], ylim = c(0,0.06), axes = F, ylab = "")
lines(max_spe~tp, col = coul[i], lty = 2)
}
}
error.bars<-function(x,y,xbar,ybar, coul)
{arrows(x,y-ybar,x,y+ybar,code=3,angle=90,length=0.05, col=coul)
#arrows(x-xbar,y,x+xbar,y,code=3,angle=90,length=0.05, col=coul)
}
rep='/home/bgauzens/projects/plantes/interact/benoit-exp-result/results/'
setwd(rep)
#############################################################################################################
#############################################################################################################
###################### Lecture des fichiers #################################################################
#############################################################################################################
#############################################################################################################
files = list.files()
tab = c()
for (i in 1:length(files)){
name_biom = files[i]
#name_ramets = gsub("biom", "ramets", name_biom) # files with number of ramets
fic = read.table(files[i])
biom = fic$V1
ramets = fic$V3
param = strsplit(name_biom, "_") #values of cp, d0, d1, taille_patches, diff between ressources, contraste
cp = param[[1]][2]
d0 = param[[1]][3]
d1 = param[[1]][4]
patch = param[[1]][5]
dif = param[[1]][6]
c = strsplit(param[[1]][7], "\\.")
if (length(c[[1]]) == 2) {
c = c[[1]][1]
} else{
c = paste(c[[1]][1], c[[1]][2], sep = ".")
}
#dif = strsplit(param[[1]][7], "\\.")[[1]][1]
dat = as.numeric(c(cp, d0, d1, patch, c, dif)) #dat* correspnd to values and parameters of files[i]
dat = matrix(dat,nrow=length(biom),ncol=length(dat),byrow=TRUE)
data = cbind(dat, biom)
data =  cbind(data, ramets)
if (i == 1){
tab = data
} else {
tab = rbind(tab, data)
}
}
tab = as.data.frame(tab)
names(tab) = c("cp", "d0", "d1", "patch", "cost", "dif", "biom", "ramets")
#############################################################################################################
#############################################################################################################
##################################### plots #################################################################
#############################################################################################################
#############################################################################################################
#par(mfrow = c(2,2))
split.screen( figs = c( 2, 2 ) )
dif = sort(unique(tab$dif))
couleur<-colors()
coul=sample(rainbow(length(dif)), length(dif))
for ( i in 1:length(dif)){
t = tab[tab$dif == dif[i],] #tableau pour une dif donnée
tp = sort(unique(t$patch))
max_plast = c()
max_spe = c()
max_dif_null = c()
for (j in 1:length(tp)){
t1 = t[t$patch==tp[j],] #tableau pour une dif donnée et un taille patch donné
spe = t1$d0 - t1$d1
dif_null = c()
for (k in 1:length(t1)[1]){
dd0 = t1$d0[k]
dd1 = t1$d1[k]
if ((dd0 + dd1) %% 2 ==0){
without_plast = t1$biom[k] - t1$biom[(t1$d0 + t1$d1 == dd0 + dd1) & (t1$d0 == t1$d1)]
}
else{
without_plast1 = t1$biom[k] - t1$biom[(t1$d0 + t1$d1 == dd0 + dd1 + 1) & (t1$d0 == t1$d1)]
without_plast2 = t1$biom[k] - t1$biom[(t1$d0 + t1$d1 == dd0 + dd1 - 1) & (t1$d0 == t1$d1)]
without_plast = (without_plast1 + without_plast2)/2
}
dif_null = c(dif_null, without_plast)
}
t1 = cbind(spe, t1)
max_plast = c(max_plast, t1$spe[t1$biom == max(t1$biom)]) # ! peu poser pb si plusieurs maxs!!!!!!!
max_spe = c(max_spe, t1$cp[t1$biom == max(t1$biom)])
max_dif_null = c(max_dif_null, max(dif_null))
}
if (i==1){
screen(1)
a = plot(max_plast~tp, col = coul[i], ylim = c(0,8))
lines(max_plast~tp, col = coul[i])
par(new=TRUE)
b = plot(max_spe~tp, col = coul[i], ylim = c(0,0.06), axes = F, ylab = "")
lines(max_spe~tp, col = coul[i], lty = 2)
screen(2)
plot(max_dif_null~tp, col = coul[i], ylim = c(0,8))
} else {
screen(1)
par(new=TRUE)
plot(max_plast~tp, col = coul[i], ylim = c(0,8))
lines(max_plast~tp, col = coul[i])
par(new=TRUE)
plot(max_spe~tp, col = coul[i], ylim = c(0,0.06), axes = F, ylab = "")
lines(max_spe~tp, col = coul[i], lty = 2)
}
}
#######################################
#par(mfrow = c(2,2))
split.screen( figs = c( 2, 2 ) )
dif = sort(unique(tab$dif))
couleur<-colors()
coul=sample(rainbow(length(dif)), length(dif))
for ( i in 1:length(dif)){
t = tab[tab$dif == dif[i],] #tableau pour une dif donnée
tp = sort(unique(t$patch))
max_plast = c()
max_spe = c()
max_dif_null = c()
for (j in 1:length(tp)){
t1 = t[t$patch==tp[j],] #tableau pour une dif donnée et un taille patch donné
spe = t1$d0 - t1$d1
dif_null = c()
for (k in 1:length(t1)[1]){
dd0 = t1$d0[k]
dd1 = t1$d1[k]
if ((dd0 + dd1) %% 2 ==0){
without_plast = t1$biom[k] - t1$biom[(t1$d0 + t1$d1 == dd0 + dd1) & (t1$d0 == t1$d1)]
}
else{
without_plast1 = t1$biom[k] - t1$biom[(t1$d0 + t1$d1 == dd0 + dd1 + 1) & (t1$d0 == t1$d1)]
without_plast2 = t1$biom[k] - t1$biom[(t1$d0 + t1$d1 == dd0 + dd1 - 1) & (t1$d0 == t1$d1)]
without_plast = (without_plast1 + without_plast2)/2
}
dif_null = c(dif_null, without_plast)
}
t1 = cbind(spe, t1)
max_plast = c(max_plast, t1$spe[t1$biom == max(t1$biom)]) # ! peu poser pb si plusieurs maxs!!!!!!!
max_spe = c(max_spe, t1$cp[t1$biom == max(t1$biom)])
max_dif_null = c(max_dif_null, max(dif_null))
}
if (i==1){
screen(1)
a = plot(max_plast~tp, col = coul[i], ylim = c(0,8))
lines(max_plast~tp, col = coul[i])
par(new=TRUE)
b = plot(max_spe~tp, col = coul[i], ylim = c(0,0.06), axes = F, ylab = "")
lines(max_spe~tp, col = coul[i], lty = 2)
screen(2)
plot(max_dif_null~tp, col = coul[i], ylim = c(0,8))
} else {
screen(1)
par(new=TRUE)
plot(max_plast~tp, col = coul[i], ylim = c(0,8))
lines(max_plast~tp, col = coul[i])
par(new=TRUE)
plot(max_spe~tp, col = coul[i], ylim = c(0,0.06), axes = F, ylab = "")
lines(max_spe~tp, col = coul[i], lty = 2)
}
close.screen(all.screens = TRUE)
}
#######################################
#par(mfrow = c(2,2))
split.screen( figs = c( 2, 2 ) )
dif = sort(unique(tab$dif))
couleur<-colors()
coul=sample(rainbow(length(dif)), length(dif))
for ( i in 1:length(dif)){
t = tab[tab$dif == dif[i],] #tableau pour une dif donnée
tp = sort(unique(t$patch))
max_plast = c()
max_spe = c()
max_dif_null = c()
for (j in 1:length(tp)){
t1 = t[t$patch==tp[j],] #tableau pour une dif donnée et un taille patch donné
spe = t1$d0 - t1$d1
dif_null = c()
for (k in 1:length(t1)[1]){
dd0 = t1$d0[k]
dd1 = t1$d1[k]
if ((dd0 + dd1) %% 2 ==0){
without_plast = t1$biom[k] - t1$biom[(t1$d0 + t1$d1 == dd0 + dd1) & (t1$d0 == t1$d1)]
}
else{
without_plast1 = t1$biom[k] - t1$biom[(t1$d0 + t1$d1 == dd0 + dd1 + 1) & (t1$d0 == t1$d1)]
without_plast2 = t1$biom[k] - t1$biom[(t1$d0 + t1$d1 == dd0 + dd1 - 1) & (t1$d0 == t1$d1)]
without_plast = (without_plast1 + without_plast2)/2
}
dif_null = c(dif_null, without_plast)
}
t1 = cbind(spe, t1)
max_plast = c(max_plast, t1$spe[t1$biom == max(t1$biom)]) # ! peu poser pb si plusieurs maxs!!!!!!!
max_spe = c(max_spe, t1$cp[t1$biom == max(t1$biom)])
max_dif_null = c(max_dif_null, max(dif_null))
}
if (i==1){
screen(1)
a = plot(max_plast~tp, col = coul[i], ylim = c(0,8))
lines(max_plast~tp, col = coul[i])
par(new=TRUE)
b = plot(max_spe~tp, col = coul[i], ylim = c(0,0.06), axes = F, ylab = "")
lines(max_spe~tp, col = coul[i], lty = 2)
screen(2)
plot(max_dif_null~tp, col = coul[i], ylim = c(0,8))
} else {
screen(1)
par(new=TRUE)
plot(max_plast~tp, col = coul[i], ylim = c(0,8))
lines(max_plast~tp, col = coul[i])
par(new=TRUE)
plot(max_spe~tp, col = coul[i], ylim = c(0,0.06), axes = F, ylab = "")
lines(max_spe~tp, col = coul[i], lty = 2)
}
close.screen(all.screens = TRUE)
}
###########################################################################################################
##################################### plots #################################################################
#############################################################################################################
#############################################################################################################
#par(mfrow = c(2,2))
split.screen( figs = c( 2, 2 ) )
dif = sort(unique(tab$dif))
couleur<-colors()
coul=sample(rainbow(length(dif)), length(dif))
for ( i in 1:length(dif)){
t = tab[tab$dif == dif[i],] #tableau pour une dif donnée
tp = sort(unique(t$patch))
max_plast = c()
max_spe = c()
max_dif_null = c()
for (j in 1:length(tp)){
t1 = t[t$patch==tp[j],] #tableau pour une dif donnée et un taille patch donné
spe = t1$d0 - t1$d1
dif_null = c()
for (k in 1:length(t1)[1]){
dd0 = t1$d0[k]
dd1 = t1$d1[k]
if ((dd0 + dd1) %% 2 ==0){
without_plast = t1$biom[k] - t1$biom[(t1$d0 + t1$d1 == dd0 + dd1) & (t1$d0 == t1$d1)]
}
else{
without_plast1 = t1$biom[k] - t1$biom[(t1$d0 + t1$d1 == dd0 + dd1 + 1) & (t1$d0 == t1$d1)]
without_plast2 = t1$biom[k] - t1$biom[(t1$d0 + t1$d1 == dd0 + dd1 - 1) & (t1$d0 == t1$d1)]
without_plast = (without_plast1 + without_plast2)/2
}
dif_null = c(dif_null, without_plast)
}
t1 = cbind(spe, t1)
max_plast = c(max_plast, t1$spe[t1$biom == max(t1$biom)]) # ! peu poser pb si plusieurs maxs!!!!!!!
max_spe = c(max_spe, t1$cp[t1$biom == max(t1$biom)])
max_dif_null = c(max_dif_null, max(dif_null))
}
if (i==1){
screen(1)
a = plot(max_plast~tp, col = coul[i], ylim = c(0,8))
lines(max_plast~tp, col = coul[i])
par(new=TRUE)
b = plot(max_spe~tp, col = coul[i], ylim = c(0,0.06), axes = F, ylab = "")
lines(max_spe~tp, col = coul[i], lty = 2)
screen(2)
plot(max_dif_null~tp, col = coul[i], ylim = c(0,8))
} else {
screen(1)
par(new=TRUE)
plot(max_plast~tp, col = coul[i], ylim = c(0,8))
lines(max_plast~tp, col = coul[i])
par(new=TRUE)
plot(max_spe~tp, col = coul[i], ylim = c(0,0.06), axes = F, ylab = "")
lines(max_spe~tp, col = coul[i], lty = 2)
}
}
close.screen(all.screens = TRUE)
max_dif_null
dif_null
t1
k
length(t1)
dim(t1)
#############################################################################################################
#############################################################################################################
##################################### plots #################################################################
#############################################################################################################
#############################################################################################################
#par(mfrow = c(2,2))
split.screen( figs = c( 2, 2 ) )
dif = sort(unique(tab$dif))
couleur<-colors()
coul=sample(rainbow(length(dif)), length(dif))
for ( i in 1:length(dif)){
t = tab[tab$dif == dif[i],] #tableau pour une dif donnée
tp = sort(unique(t$patch))
max_plast = c()
max_spe = c()
max_dif_null = c()
for (j in 1:length(tp)){
t1 = t[t$patch==tp[j],] #tableau pour une dif donnée et un taille patch donné
spe = t1$d0 - t1$d1
dif_null = c()
for (k in 1:dim(t1)[1]){
dd0 = t1$d0[k]
dd1 = t1$d1[k]
if ((dd0 + dd1) %% 2 ==0){
without_plast = t1$biom[k] - t1$biom[(t1$d0 + t1$d1 == dd0 + dd1) & (t1$d0 == t1$d1)]
}
else{
without_plast1 = t1$biom[k] - t1$biom[(t1$d0 + t1$d1 == dd0 + dd1 + 1) & (t1$d0 == t1$d1)]
without_plast2 = t1$biom[k] - t1$biom[(t1$d0 + t1$d1 == dd0 + dd1 - 1) & (t1$d0 == t1$d1)]
without_plast = (without_plast1 + without_plast2)/2
}
dif_null = c(dif_null, without_plast)
}
t1 = cbind(spe, t1)
max_plast = c(max_plast, t1$spe[t1$biom == max(t1$biom)]) # ! peu poser pb si plusieurs maxs!!!!!!!
max_spe = c(max_spe, t1$cp[t1$biom == max(t1$biom)])
max_dif_null = c(max_dif_null, max(dif_null))
}
if (i==1){
screen(1)
a = plot(max_plast~tp, col = coul[i], ylim = c(0,8))
lines(max_plast~tp, col = coul[i])
par(new=TRUE)
b = plot(max_spe~tp, col = coul[i], ylim = c(0,0.06), axes = F, ylab = "")
lines(max_spe~tp, col = coul[i], lty = 2)
screen(2)
plot(max_dif_null~tp, col = coul[i], ylim = c(0,8))
} else {
screen(1)
par(new=TRUE)
plot(max_plast~tp, col = coul[i], ylim = c(0,8))
lines(max_plast~tp, col = coul[i])
par(new=TRUE)
plot(max_spe~tp, col = coul[i], ylim = c(0,0.06), axes = F, ylab = "")
lines(max_spe~tp, col = coul[i], lty = 2)
}
}
close.screen(all.screens = TRUE)
max_dif_null
k
dd0
dd1
without_plast = t1$biom[k] - t1$biom[(t1$d0 + t1$d1 == dd0 + dd1) & (t1$d0 == t1$d1)]
without_plast
t1$biom[k]
t1$biom[(t1$d0 + t1$d1 == dd0 + dd1) & (t1$d0 == t1$d1)]
t1$biom[(t1$d0 + t1$d1 == dd0 + dd1)]
t1$biom[(t1$d0 == t1$d1)]
t1$d0
t1$d1
